/* =================================================================== */
/*  TOKENS & THEME (light/dark)                                        */
/* =================================================================== */
:root{
  --bg:#0f172a;          /* body bg (dark) */
  --surface:#1f2937;     /* card bg (dark) */
  --text:#e5e7eb;        /* main text      */
  --muted:#9ca3af;       /* subtitle       */
  --ring:rgba(255,255,255,.06);
  --shadow:rgba(0,0,0,.35);

  /* light */
  --bg-l:#ffffff;
  --surface-l:#f7f7fb;
  --text-l:#0f172a;
  --muted-l:#6b7280;
  --ring-l:rgba(15,23,42,.08);
  --shadow-l:rgba(2,6,23,.10);
}
html.dark body{ background:var(--bg); color:var(--text); }
html:not(.dark) body{ background:var(--bg-l); color:var(--text-l); }

/* Font base */
body{ font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,'Apple Color Emoji','Segoe UI Emoji',sans-serif; }

/* =================================================================== */
/*  HOME – Feature cards + Hero                                         */
/* =================================================================== */
.feature{
  display:grid; grid-template-columns:auto 1fr auto; gap:14px;
  align-items:center; padding:14px 16px; border-radius:16px;
  background:var(--surface); border:1px solid var(--ring);
  box-shadow:0 6px 16px var(--shadow); position:relative;
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
html:not(.dark) .feature{ background:var(--surface-l); box-shadow:0 8px 20px var(--shadow-l); }
.feature:hover{ transform:translateY(-3px); box-shadow:0 12px 28px rgba(0,0,0,.45); }
html:not(.dark) .feature:hover{ box-shadow:0 14px 30px rgba(2,6,23,.15); }
.feature:active{ transform:translateY(-1px) scale(.99); }

.feature .icon{
  width:44px; height:44px; border-radius:12px; display:grid; place-items:center;
  color:#fff; box-shadow: inset 0 0 0 1px rgba(255,255,255,.2), 0 6px 16px rgba(0,0,0,.25);
  transition:transform .18s ease, filter .18s ease; font-size:22px;
}
.feature:hover .icon{ transform:translateY(-1px); filter:saturate(1.1); }

.feature .title{ font-weight:700; letter-spacing:.2px; }
.feature .subtitle{ color:var(--muted); font-size:.92rem; margin-top:2px; }
html:not(.dark) .feature .subtitle{ color:var(--muted-l); }

.feature .chev{
  width:30px; height:30px; display:grid; place-items:center; opacity:.7;
  border-radius:999px; background:rgba(255,255,255,.05);
}
html:not(.dark) .feature .chev{ background:rgba(2,6,23,.05); }

/* Gradient accents for icon */
[data-accent="violet"] .icon{ background:linear-gradient(135deg,#a78bfa,#7c3aed); }
[data-accent="teal"]   .icon{ background:linear-gradient(135deg,#34d399,#0ea5e9); }
[data-accent="amber"]  .icon{ background:linear-gradient(135deg,#fbbf24,#f97316); }
[data-accent="rose"]   .icon{ background:linear-gradient(135deg,#fb7185,#e11d48); }
[data-accent="blue"]   .icon{ background:linear-gradient(135deg,#60a5fa,#2563eb); }
[data-accent="green"]  .icon{ background:linear-gradient(135deg,#84cc16,#16a34a); }

.section-title{ font-weight:800; font-size:1.15rem; margin:18px 4px; opacity:.9; }

/* Hero – “Ôn tập hôm nay” */
.hero{
  padding:18px 18px 22px; border-radius:18px;
  background:linear-gradient(135deg,#6d28d9,#7c3aed 35%,#4338ca); color:#fff;
  box-shadow:0 16px 40px rgba(79,70,229,.35);
}
.hero .progress{ height:8px; border-radius:999px; background:rgba(255,255,255,.25); overflow:hidden; }
.hero .progress>span{ display:block; height:100%;
  background:linear-gradient(90deg,#22d3ee,#a78bfa); border-radius:999px;
}

/* =================================================================== */
/*  Tabs / Main layout helpers                                          */
/* =================================================================== */
.tab-content{ display:none; }
.tab-content.active{ display:block; }
.tab-button.active svg{ color:#4f46e5; }     /* indigo-600 */
.tab-button.active span{ color:#4f46e5; }
.dark .tab-button.active svg{ color:#818cf8; }  /* indigo-400 */
.dark .tab-button.active span{ color:#818cf8; }

/* Game modal shell */
.game-screen{
  position:fixed; inset:0; background-color:rgba(0,0,0,.5);
  z-index:100; display:none; align-items:center; justify-content:center;
}
.game-screen.active{ display:flex; }

/* Container size for game screens */
.game-container{ width:95%; max-width:42rem; max-height:95vh; overflow-y:auto; }
@media (min-width:768px){ .game-container{ max-width:48rem; } }

/* Loader */
.loader{ border:4px solid #f3f3f3; border-top:4px solid #4f46e5; border-radius:50%; width:30px; height:30px; animation:spin 1s linear infinite; }
@keyframes spin{ to{ transform:rotate(360deg) } }

/* Font-scale utilities for vocab */
.vocab-font-size{ font-size:calc(1rem * var(--vocab-font-scale,1)); }
.vocab-font-size-review{ font-size:calc(1.5rem * var(--vocab-font-scale,1)); }
.vocab-font-size-mcq{ font-size:calc(1.875rem * var(--vocab-font-scale,1)); }
.vocab-font-size-flashcard{ font-size:calc(1.875rem * var(--vocab-font-scale,1)); }
.vocab-font-size-pronunciation{ font-size:calc(2.25rem * var(--vocab-font-scale,1)); }

/* Flashcard */
#flashcard-content{ min-height:24rem; }
#flashcard-text-content.no-image{ margin:auto 0; }

/* Vocab form toggles */
#vocab-form-modal .details-hidden #vocab-details-section{ display:none; }
#vocab-form-modal .details-hidden #image-search-results{ height:25rem; }

/* Simple fades */
@keyframes fade-in-up{ from{opacity:0; transform:translateY(20px)} to{opacity:1; transform:none} }
@keyframes fade-out-down{ from{opacity:1; transform:none} to{opacity:0; transform:translateY(20px)} }
.animate-fade-in-up{ animation:fade-in-up .3s ease-out forwards; }
.animate-fade-out-down{ animation:fade-out-down .3s ease-in forwards; }

@keyframes fade-in-down{ from{opacity:0; transform:translateY(-20px)} to{opacity:1; transform:none} }
@keyframes fade-out-up{ from{opacity:1; transform:none} to{opacity:0; transform:translateY(-20px)} }
.animate-fade-in-down{ animation:fade-in-down .3s ease-out forwards; }
.animate-fade-out-up{ animation:fade-out-up .3s ease-in forwards; }

/* =================================================================== */
/*  Hangman mini FX                                                     */
/* =================================================================== */
@keyframes hm-shake{
  0%,100%{transform:translateX(0)}
  20%{transform:translateX(-6px)}
  40%{transform:translateX(6px)}
  60%{transform:translateX(-4px)}
  80%{transform:translateX(4px)}
}
.hm-shake{ animation:hm-shake 300ms ease; }

@keyframes hm-pop{
  0%{transform:scale(.6); opacity:.6}
  60%{transform:scale(1.2); opacity:1}
  100%{transform:scale(1)}
}
.hm-pop{ animation:hm-pop 260ms ease; }

@keyframes hm-flash-kf{ from{opacity:.7} to{opacity:0} }
.hm-flash::after{
  content:""; position:absolute; inset:0; background:rgba(239,68,68,.18);
  animation:hm-flash-kf 250ms ease forwards; pointer-events:none; border-radius:.75rem;
}

.hm-particle{
  position:fixed; z-index:60; pointer-events:none; font-size:18px; line-height:1;
  transform:translate(-50%,-50%); animation:hm-fly 700ms ease-out forwards;
}
@keyframes hm-fly{
  0%{ transform:translate(-50%,-50%) scale(.7); opacity:1 }
  100%{ transform:translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.1); opacity:0 }
}

/* =================================================================== */
/*  Word Match helpers (legacy + new)                                   */
/* =================================================================== */
#wm-links-svg{ position:absolute; inset:0; pointer-events:none; overflow:visible; }
.wm-link{ stroke-width:4.5; stroke-linecap:round; fill:none; filter:url(#wm-glow); }
@media (min-width:768px){ .wm-link{ stroke-width:5.5; } }

/* Pop & dot pulse when matched */
.wm-correct-pop{ animation:wm-pop .36s ease; }
@keyframes wm-pop{
  0%{transform:scale(1)}
  40%{transform:scale(1.08)}
  70%{transform:scale(.98)}
  100%{transform:scale(1)}
}
.wm-dot-pulse{ animation:wm-dot .6s ease-out 1; box-shadow:0 0 0 0 rgba(255,255,255,.6); }
@keyframes wm-dot{ from{box-shadow:0 0 0 0 rgba(255,255,255,.7)} to{box-shadow:0 0 0 14px rgba(255,255,255,0)} }

/* Make sure FX canvas behaves as block */
#wm-fx{ display:block; }


/* === Migrated from index.html: style block 4 (WM SVG) === */
/* SVG layer phủ lên 2 cột */
    #wm-links-svg { position:absolute; inset:0; pointer-events:none; overflow:visible; }
    /* hiệu ứng sáng nhẹ */
    .wm-link { stroke-width:4.5; stroke-linecap:round; fill:none; filter:url(#wm-glow); }
    @media (min-width: 768px) { .wm-link{ stroke-width:5.5; } }

/* === Migrated from index.html: style block 3 (effects & helpers) === */
@keyframes hm-shake {
      0%, 100% { transform: translateX(0) }
      20% { transform: translateX(-6px) }
      40% { transform: translateX(6px) }
      60% { transform: translateX(-4px) }
      80% { transform: translateX(4px) }
    }
    .hm-shake { animation: hm-shake 300ms ease; }

    @keyframes hm-pop {
      0% { transform: scale(.6); opacity: .6 }
      60% { transform: scale(1.2); opacity: 1 }
      100% { transform: scale(1); }
    }
    .hm-pop { animation: hm-pop 260ms ease; }

    @keyframes hm-flash-kf {
      from { opacity: .7 }
      to { opacity: 0 }
    }
    .hm-flash::after {
      content: "";
      position: absolute; inset: 0;
      background: rgba(239, 68, 68, .18); /* red-500 */
      animation: hm-flash-kf 250ms ease forwards;
      pointer-events: none;
      border-radius: 0.75rem; /* khớp rounded-xl của board nếu cần */
    }

    .hm-particle {
      position: fixed; z-index: 60; pointer-events: none;
      font-size: 18px; line-height: 1;
      transform: translate(-50%, -50%); /* start at center */
      animation: hm-fly 700ms ease-out forwards;
    }
    @keyframes hm-fly {
      0%   { transform: translate(-50%, -50%) scale(.7); opacity: 1 }
      100% { transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.1); opacity: 0 }
    }

/* === Migrated from index.html: style block 2 (layout + components) === */
body { font-family: 'Inter', sans-serif; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .tab-button.active svg { color: #4f46e5; } /* indigo-600 */
        .tab-button.active span { color: #4f46e5; } /* indigo-600 */
        .dark .tab-button.active svg { color: #818cf8; } /* indigo-400 */
        .dark .tab-button.active span { color: #818cf8; } /* indigo-400 */

        .game-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 100;
            display: none;
            align-items: center;
            justify-content: center;
        }
        .game-screen.active { display: flex; }
        /* =================================================================== */
        /* START: THAY ĐỔI Ở ĐÂY */
        /* =================================================================== */
        .game-container {
            width: 95%;
            max-width: 42rem; /* Tăng chiều rộng tối đa (tương đương max-w-2xl) */
            max-height: 95vh;   /* Tăng chiều cao tối đa */
            overflow-y: auto;
        }
        /* =================================================================== */
        /* END: THAY ĐỔI */
        /* =================================================================== */
        @media (min-width: 768px) {
            .game-container {
                max-width: 48rem; /* Tăng thêm cho màn hình lớn hơn */
            }
        }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #4f46e5; border-radius: 50%; width: 30px; height: 30px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .vocab-font-size {
            font-size: calc(1rem * var(--vocab-font-scale, 1));
        }
        .vocab-font-size-review { font-size: calc(1.5rem * var(--vocab-font-scale, 1)); }
        .vocab-font-size-mcq { font-size: calc(1.875rem * var(--vocab-font-scale, 1)); }
        .vocab-font-size-flashcard { font-size: calc(1.875rem * var(--vocab-font-scale, 1)); }
        .vocab-font-size-pronunciation { font-size: calc(2.25rem * var(--vocab-font-scale, 1)); }
        
        #flashcard-content { min-height: 24rem; }
        #flashcard-text-content.no-image { margin: auto 0; }
        
        #vocab-form-modal .details-hidden #vocab-details-section {
            display: none;
        }
        #vocab-form-modal .details-hidden #image-search-results {
            height: 25rem; 
        }
        @keyframes fade-in-up {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-out-down {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(20px); }
        }
        .animate-fade-in-up {
            animation: fade-in-up 0.3s ease-out forwards;
        }
        .animate-fade-out-down {
            animation: fade-out-down 0.3s ease-in forwards;
        }

        @keyframes fade-in-down {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fade-out-up {
            from { opacity: 1; transform: translateY(0); }
            to { opacity: 0; transform: translateY(-20px); }
        }
        .animate-fade-in-down {
            animation: fade-in-down 0.3s ease-out forwards;
        }
        .animate-fade-out-up {
            animation: fade-out-up 0.3s ease-in forwards;
        }

/* === Migrated from index.html: style block 1 (tokens & base) === */
/* ===== Tokens & nền cho light/dark ===== */
:root{
  --bg: #0f172a;           /* body bg (dark)   */
  --surface: #1f2937;      /* card bg (dark)   */
  --text: #e5e7eb;         /* main text        */
  --muted: #9ca3af;        /* subtitle         */
  --ring: rgba(255,255,255,.06);
  --shadow: rgba(0,0,0,.35);

  /* light */
  --bg-l: #ffffff;
  --surface-l: #f7f7fb;
  --text-l: #0f172a;
  --muted-l: #6b7280;
  --ring-l: rgba(15,23,42,.08);
  --shadow-l: rgba(2,6,23,.10);
}
html.dark body{ background:var(--bg); color:var(--text); }
html:not(.dark) body{ background:var(--bg-l); color:var(--text-l); }

/* ===== Card chức năng ===== */
.feature{
  display:grid; grid-template-columns:auto 1fr auto; gap:14px;
  align-items:center; padding:14px 16px; border-radius:16px;
  background:var(--surface); border:1px solid var(--ring);
  box-shadow:0 6px 16px var(--shadow); position:relative;
  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;
}
html:not(.dark) .feature{ background:var(--surface-l); box-shadow:0 8px 20px var(--shadow-l); }
.feature:hover{ transform:translateY(-3px); box-shadow:0 12px 28px rgba(0,0,0,.45); }
html:not(.dark) .feature:hover{ box-shadow:0 14px 30px rgba(2,6,23,.15); }
.feature:active{ transform:translateY(-1px) scale(.99); }

.feature .icon{
  width:44px; height:44px; border-radius:12px; display:grid; place-items:center;
  color:#fff; box-shadow: inset 0 0 0 1px rgba(255,255,255,.2), 0 6px 16px rgba(0,0,0,.25);
  transition:transform .18s ease, filter .18s ease;
  font-size: 22px;
}
.feature:hover .icon{ transform:translateY(-1px); filter:saturate(1.1); }

.feature .title{ font-weight:700; letter-spacing:.2px; }
.feature .subtitle{ color:var(--muted); font-size:.92rem; margin-top:2px; }
html:not(.dark) .feature .subtitle{ color:var(--muted-l); }

.feature .chev{
  width:30px; height:30px; display:grid; place-items:center; opacity:.7;
  border-radius:999px; background:rgba(255,255,255,.05);
}
html:not(.dark) .feature .chev{ background:rgba(2,6,23,.05); }

/* Accents (gradient cho icon) */
[data-accent="violet"] .icon{ background:linear-gradient(135deg,#a78bfa,#7c3aed); }
[data-accent="teal"]   .icon{ background:linear-gradient(135deg,#34d399,#0ea5e9); }
[data-accent="amber"]  .icon{ background:linear-gradient(135deg,#fbbf24,#f97316); }
[data-accent="rose"]   .icon{ background:linear-gradient(135deg,#fb7185,#e11d48); }
[data-accent="blue"]   .icon{ background:linear-gradient(135deg,#60a5fa,#2563eb); }
[data-accent="green"]  .icon{ background:linear-gradient(135deg,#84cc16,#16a34a); }

/* Section title */
.section-title{ font-weight:800; font-size:1.15rem; margin:18px 4px; opacity:.9; }

/* ===== Hero “Ôn tập hôm nay” ===== */
.hero{
  padding:18px 18px 22px; border-radius:18px;
  background:linear-gradient(135deg,#6d28d9,#7c3aed 35%,#4338ca); color:#fff;
  box-shadow:0 16px 40px rgba(79,70,229,.35);
}
.hero .progress{ height:8px; border-radius:999px; background:rgba(255,255,255,.25); overflow:hidden; }
.hero .progress > span{ display:block; height:100%;
  background:linear-gradient(90deg,#22d3ee,#a78bfa); border-radius:999px; }
/* Hiệu ứng rung khi sai */
.shake { animation: shake 160ms ease-in-out 0s 2; }
@keyframes shake {
  0%,100% { transform: translateX(0) }
  25% { transform: translateX(-3px) }
  75% { transform: translateX(3px) }
}

/* Cải thiện outline khi dùng bàn phím (nếu Tailwind không render ring) */
:focus-visible { outline-offset: 2px; }
